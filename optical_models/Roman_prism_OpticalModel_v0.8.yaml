meta:
  # Metadata information
  product_type: wfi_calibration_optical_model
  filename: Roman_prism_OpticalModel_v0.8.yaml
  file_date: 2025-09-17Z00:00:00
  origin: IPAC/SSC
  telescope: ROMAN
  instrument: WFI
  version_cdp_software: 4.0.0
  optical_element: prism
  unit_wl: micron
  context: null
  calibration_filenames:
    small_scale_flatfield: null
    relative_flux_calibration: null
    absolute_flux_calibration: null
    spectral_psf: null

detector_model:
  # Detector specifics
  naxis1: 4088
  naxis2: 4088
  crpix1: 2044.5
  crpix2: 2044.5
  pos_angle_detector: 0.0 # rotation angle for the SCAs
  plate_scale: 100 # pixel/mm
  pixel_scale: 0.11 # arcsec/px

  # SCA centers in mm
  xy_centers:
    1: [-22.14, 12.15]
    2: [-22.29, -37.03]
    3: [-22.44, -82.06]
    4: [-66.42, 20.90]
    5: [-66.92, -28.28]
    6: [-67.42, -73.06]
    7: [-110.70, 42.20]
    8: [-111.48, -6.98]
    9: [-112.64, -51.06]
    10: [22.14, 12.15]
    11: [22.29, -37.03]
    12: [22.44, -82.06]
    13: [66.42, 20.90]
    14: [66.92, -28.28]
    15: [67.42, -73.06]
    16: [110.70, 42.20]
    17: [111.48, -6.98]
    18: [112.64, -51.06]

optical_model:
  # Wavelength specifics
  wl_min: 0.75 # in micron
  wl_max: 1.85 # in micron
  wl_reference: 1.20 # in micron
  wl_transform: log

  # Coefficient matrix dimensions
  dimen_map:
    i: 6 # FPAx dimension
    j: 6 # FPAy dimension

  dimen_crv:
    i: 6 # Wavelength dimension [micron]
    j: 6 # FPAx dimension
    k: 6 # FPAy dimension

  dimen_ids:
    i: 6 # Delta y distance along trace [mm]
    j: 6 # FPAx dimension
    k: 6 # FPAy dimension

  # List of orders defined (only one order for prism)
  orders_defined: ["1"]

  orders:
    # Primary (and only) order
    "1":
      xmap_ij_coeff:
        [
          [-3.2586e-01, +1.0527e-01, +1.3745e-02, -4.5530e-02, -8.4277e-02, -3.4747e-02],
          [+3.2955e+02, -1.7272e+01, +1.9143e+01, -2.9991e+00, +4.1477e-01, -3.1791e+00],
          [+4.0631e-03, -1.2502e-02, +2.2342e-01, +6.5607e-01, -3.1760e+00, -1.0301e+01],
          [+1.8226e+01, -2.7794e+00, +2.7388e+00, -3.5692e+00, +1.5661e+01, +2.2579e+01],
          [+1.5243e-02, -1.1852e-01, -6.6652e-01, -1.3321e+00, +1.7271e+01, +4.4172e+01],
          [+1.5206e+00, -1.2689e+00, +8.8337e-01, -4.0813e+00, -6.8761e+01, +4.5620e+02],
        ]

      ymap_ij_coeff:
        [
          [-1.1839e-01, +3.3706e+02, -2.7704e+01, +1.9895e+01, -4.6543e+00, +2.4596e-01],
          [-1.4475e-01, -4.4152e-04, -6.8843e-02, -1.8304e-01, +1.2799e+00, +4.2355e+00],
          [-9.7035e+00, +1.8933e+01, -5.1829e+00, +4.1657e+00, +4.5831e+00, -2.0464e+00],
          [-2.6165e-02, -2.7830e-01, +5.4473e-01, +1.1321e+01, -2.8367e+01, -1.6913e+02],
          [-8.9614e-01, +1.7092e+00, +4.0315e-01, -6.0727e+00, -2.7675e+01, -7.2198e+01],
          [+2.8417e-02, +1.9525e+00, -4.3897e+00, -8.7990e+01, +1.8236e+02, +1.1727e+03],
        ]

      crv_ijk_coeff:
        [
          [
            [-2.2492e-07, +5.4770e-05, +3.7001e-04, -1.8985e-03, -1.7185e-02, -2.8976e-02],
            [-2.9921e-05, +1.9336e-05, +2.1551e-03, -1.1691e-02, -8.6373e-02, -8.0362e-02],
            [-2.4265e-05, -1.1441e-03, -6.3954e-03, +5.9434e-02, +3.1879e-01, +1.5978e-01],
            [+7.3312e-04, -3.4451e-03, -3.7784e-02, +5.1387e-01, +1.0776e+00, -4.0425e+00],
            [+2.6878e-04, +7.0884e-03, +1.1873e-02, -5.6176e-01, -9.2037e-01, +5.6974e+00],
            [-4.0457e-03, +2.9910e-02, +1.6559e-01, -3.7062e+00, -2.9120e+00, +4.5872e+01],
          ],
          [
            [-1.8914e-03, +1.9878e-03, -1.4992e-03, +2.4885e-03, +9.2476e-02, +2.1250e-01],
            [-1.0026e-01, +2.2022e-01, +3.2341e-02, -9.3255e-03, +5.4591e-01, +1.3763e+00],
            [-6.1239e-04, +6.1684e-03, +8.0762e-02, -1.6898e-01, -2.9921e+00, -5.2911e+00],
            [-1.1154e-03, +3.7798e-02, +5.7427e-03, -1.6874e+00, -3.8949e+00, +1.3505e+01],
            [+3.4985e-04, -5.1929e-02, -3.0121e-01, +3.1225e+00, +1.1981e+01, -1.7165e+01],
            [+7.0985e-04, -9.8062e-02, +5.2167e-01, +1.4337e+01, -1.7709e+00, -2.2775e+02],
          ],
          [
            [+8.1260e-05, +6.4680e-05, +3.2363e-03, +1.3289e-02, -4.4695e-02, -1.9088e-01],
            [-2.1307e-03, +4.8240e-04, +9.0698e-03, +8.8183e-02, +1.4765e-01, -1.2009e-01],
            [+1.1360e-03, +4.1586e-03, -1.4717e-01, -6.0979e-01, +3.3706e+00, +1.2955e+01],
            [-3.9476e-04, +1.1064e-02, -2.7526e-01, -1.1884e+00, +9.1051e-01, +6.2427e+00],
            [-8.3833e-03, -3.7955e-02, +1.0771e+00, +4.1456e+00, -2.7471e+01, -9.4093e+01],
            [-1.3756e-02, -1.0118e-01, +2.1130e+00, +9.9602e+00, -2.7738e+01, -1.6666e+02],
          ],
          [
            [-2.0954e-05, +5.0599e-04, +4.3650e-03, -4.6504e-02, -4.1889e-01, -7.7276e-01],
            [+4.1453e-04, -1.3484e-04, +4.7085e-02, -2.3266e-02, -2.3461e+00, -5.6852e+00],
            [+2.7285e-05, -1.8833e-02, -9.2473e-02, +1.5945e+00, +7.4791e+00, +1.6571e+00],
            [+3.6739e-04, -4.3507e-02, +1.4299e-02, +7.0125e+00, +1.3574e+01, -6.6835e+01],
            [+1.8313e-03, +1.8364e-01, -6.2895e-02, -1.7024e+01, -1.6371e+01, +1.9872e+02],
            [+1.0855e-02, +4.7122e-01, -3.3592e+00, -6.6422e+01, +5.1154e+01, +1.1641e+03],
          ],
          [
            [+2.7725e-05, -3.1968e-04, -1.0687e-02, -1.1746e-02, +3.2515e-01, +8.9093e-01],
            [+5.0923e-04, +2.1853e-03, -3.0705e-02, -1.2211e-01, +9.0752e-01, +3.1652e+00],
            [-2.6743e-03, +3.0639e-03, +4.5293e-01, +7.6048e-01, -1.3386e+01, -3.7137e+01],
            [-1.9431e-03, -5.4864e-03, +3.4218e-01, -1.7856e+00, -9.5008e+00, +7.7666e+00],
            [+1.8381e-02, -2.5721e-02, -2.9441e+00, -2.7184e+00, +8.6535e+01, +1.8191e+02],
            [+1.7578e-02, +4.5981e-02, -1.8301e+00, +6.9647e+00, +4.3186e+01, +3.5997e+01],
          ],
          [
            [-1.8512e-05, -7.6897e-05, +4.6727e-03, +3.2415e-02, +7.3888e-03, -1.8027e-01],
            [-2.1656e-04, -1.5651e-03, -9.6412e-03, +9.2283e-02, +7.8580e-01, +1.2256e+00],
            [+1.6684e-03, +7.9484e-03, -2.5499e-01, -1.3498e+00, +5.1437e+00, +2.4511e+01],
            [+8.8800e-04, +2.8966e-02, -2.1186e-01, -2.9303e+00, -1.1968e+00, +3.6124e+01],
            [-1.2615e-02, -8.0622e-02, +2.0514e+00, +1.1069e+01, -5.1401e+01, -2.3810e+02],
            [-1.5491e-02, -3.0223e-01, +3.1156e+00, +3.4412e+01, -6.2894e+01, -7.2035e+02],
          ],
        ]

      ids_ijk_coeff:
        [
          [
            [+1.5564e-04, -6.5745e-05, +3.2838e-05, +3.8243e-03, +2.7012e-02, +4.9279e-02],
            [-7.3713e-06, -4.9475e-04, -2.5037e-03, +2.0149e-02, +1.2379e-01, +1.3806e-01],
            [+4.7461e-05, +8.1502e-04, +1.8379e-03, -8.7453e-02, -5.2722e-01, -6.1619e-01],
            [+2.3577e-04, +1.1544e-02, +3.5900e-02, -5.1436e-01, -1.9827e+00, -6.9295e-02],
            [-1.3724e-04, -4.7110e-03, -1.3676e-02, +4.7176e-01, +2.4883e+00, +8.1067e-01],
            [-1.0368e-03, -5.0694e-02, -1.6609e-01, +2.1009e+00, +8.6584e+00, +2.3423e+00],
          ],
          [
            [-4.1727e+00, +9.6560e-01, -1.6491e+00, +4.3861e-01, -1.0176e-01, +4.6196e-01],
            [-1.8321e-03, -2.8891e-03, -7.9245e-02, -1.7016e-01, +1.1998e-01, +4.6587e-01],
            [-6.1427e-01, +1.9097e-01, -7.5287e-01, -1.0053e+00, +3.5263e+00, +1.4230e+01],
            [-1.1697e-04, +1.8113e-01, +9.9313e-01, +3.0841e-01, -2.0555e+00, +4.8690e+00],
            [-3.6793e-02, +1.5900e-01, +2.0225e+00, +3.4465e+00, -3.3091e+01, -8.4416e+01],
            [-1.1886e-02, -1.0401e+00, -2.7914e+00, +1.9203e+01, -2.3239e+00, -3.3767e+02],
          ],
          [
            [+3.5222e+00, -8.1786e-01, +1.4733e+00, -6.7672e-01, -2.2251e+00, -6.6187e+00],
            [+9.3949e-04, -4.6744e-03, +5.2799e-02, +7.3705e-01, +3.3325e+00, +2.5989e+00],
            [+5.7645e-01, -1.0087e-01, +2.3791e+00, +5.5573e+00, -3.7615e+00, -4.9342e+01],
            [+2.1899e-02, -4.0898e-02, +1.3705e+00, -8.2368e+00, -7.4531e+01, -3.6726e+01],
            [+2.7903e-02, -1.0041e+00, -1.1137e+01, -3.9063e+00, +1.2384e+02, +3.1338e+02],
            [-2.5200e-02, +6.3288e-01, -1.6661e+01, -2.5255e+00, +4.2378e+02, +6.7050e+02],
          ],
          [
            [-1.7165e+01, +3.9277e+00, -7.4015e+00, -1.9901e+00, -2.0274e+01, -4.1911e+01],
            [-8.4953e-03, +3.6511e-01, +1.4948e+00, -3.8581e+00, -1.0680e-01, +5.6026e+01],
            [-2.6207e+00, +2.6236e+00, +1.8021e+01, +3.7588e+01, -1.2790e+01, -3.4414e+02],
            [-2.4752e-01, -5.4441e+00, +1.0060e+00, +3.5936e+01, -3.1049e+02, -3.2021e+02],
            [+1.7659e-01, -1.1618e+01, -1.0486e+02, +1.3287e+01, +7.4610e+02, +1.8452e+03],
            [+1.9264e+00, +1.9159e+01, -9.8241e+01, +2.9307e+01, +2.2839e+03, -6.2356e+02],
          ],
          [
            [+1.0028e+01, -2.1651e+00, +5.2931e+00, +1.3249e+01, +1.1627e+02, +2.8119e+02],
            [+6.7981e-02, -3.4666e-02, +2.9204e-01, +7.0101e+00, -5.9556e+01, -2.7070e+02],
            [+1.6322e+00, -6.1493e+00, -5.7260e+01, -1.5677e+02, -6.0060e+02, +8.2778e+01],
            [-1.1247e+00, -3.3831e+00, -3.7952e+01, +4.2561e+01, +5.5881e+02, -1.0173e+02],
            [+4.7853e-01, +4.6261e+01, +3.0608e+02, -3.5100e+02, -9.6277e+01, -1.9128e+02],
            [+3.1343e+00, +1.4667e+01, +3.4251e+02, +6.2373e+01, -1.2111e+02, +6.5926e+01],
          ],
          [
            [-2.5269e+01, +6.3160e+00, +4.5407e+00, +1.1059e+02, +6.6219e+02, +1.5296e+03],
            [+1.9577e-01, -8.0562e+00, -5.6109e+01, +6.0679e+01, +1.7432e+02, -1.4518e+03],
            [-2.0819e+00, -5.3057e+01, -5.1399e+02, -9.6561e+02, -3.0934e+03, +8.5337e+02],
            [+1.0189e+00, +1.1410e+02, +4.4388e+02, -1.4942e+01, -3.8014e+02, -5.4623e+01],
            [-5.9752e+00, +3.8024e+02, +2.5169e+03, -2.0590e+03, -4.6367e+00, +4.4683e+01],
            [-2.5441e+01, -4.3004e+02, +2.8415e+00, -5.1220e+01, +4.4200e+01, -3.2053e+01],
          ],
        ]